# Дамп бази державних закупівель [z.texty.org.ua](http://z.texty.org.ua)

## Що у цих даних?
Це _текстовий_ дамп PostgreSQL з усіма угодами по державних тендерах, починаючи з 2008 року, включно з угодами на Prozorro. Дамп оновлюється кожного тижня.

Фактично, це база даних (БД) на якій працює наша веб-програма [z.texty.org.ua](http://z.texty.org.ua). Схема БД розроблена журналістами даних ТЕКСТІВ так, щоб спростити та об'єднати існуючі офіційні бази і показати лише необхідний мінімум (напр. ЄДРПОУ, ціна контракту, короткий опис, тощо). [Історія питання.](http://texty.org.ua/pg/article/txts/read/69511/z_for_zAKUPIVLI_Jak_my_stvoryly_vebaplikaciju?a_offset=)

## Де скачати?
За цим лінком: http://z.texty.org.ua/data/z_dump_latest.sql.gz (~400 МБ у запакованому вигляді, розмір постійно збільшується через нові тендери на Prozorro)

## Як встановити дамп

1. Встановіть PostgreSQL >=9.5
2. Створіть базу даних `tenders`

```sql
\c postgres
DROP DATABASE IF EXISTS tenders;
CREATE DATABASE tenders;
```
3. Розпакуйте та імпортуйте дамп. Це можна зробити однією командою
```sql
gunzip < z_dump_latest.sql.gz | psql tenders
```

## Опис таблиць

![Схема бази](db.png)

Загалом призначення полів випливають із їх назв. Тому далі будуть описані лише найменш очевидні:

### `transactions`
Таблиця транзакцій (угод, контрактів)

* `volume` - сума у валюті транзакції
* `volume_uah` - сума у перерахунку на гривню по курсу НБУ на дату транзакції
* `is_vat_included` - чи включено ПДВ
* `prozorro` - id об'єкта [`contract`](http://api-docs.openprocurement.org/en/latest/standard/contract.html) із БД prozorro
* `prozorro_number` - contractID контракту із БД prozorro (наприклад UA-2016-05-20-000180-b-c1)
* `source`
  * `ora` якщо контракт із [оракла](http://drz.lanet.ua/) Це архівована база даних вісника державних закупівель (2008-2014 рр.), яку колись отримали активісти. Її можна окремо завантажити за посиланням. Із цікавого - там багато вордівських файлів із протоколами розкриття цінових пропозицій.
  * `prozorro` якщо із prozorro
  * `*.xml` - якщо із xml-дампів вісника (це новіші угоди із бази даних вісника, яких не було у ораклівському дампі. Наразі вісник держзакупівель припинив роботу, усі тендери по ньому завершені, нові тільки у прозорро)

### `purchases`
Таблиця закупівель. Закупівля - це деяке узагальненя транзакції (угоди). Одна закупівля може мати декілька угод, укладаних із різними постачальниками (sellers), але завжди має єдиного замовника (buyer).

* `goods_name` - предмет закупівлі
* `prozorro` - id об'єкта [`tender`](http://api-docs.openprocurement.org/en/latest/standard/tender.html) із БД prozorro
* `prozorro_number` - tenderID закупівлі із БД prozorro (наприклад UA-2016-05-20-000180-b)
* `source` - джерело даних (аналогічно таблиці transactions)

### `buyers`
Таблиця замовників (покупців)

* `code` - код ЄДРПОУ або РНОКПП (фізичної або юридичної особи). в окремих випадках вказують іноземні коди

### `sellers`
Таблиця постачальників (продавців)

* `code` - код ЄДРПОУ або РНОКПП (фізичної або юридичної особи). В окремих випадках вказують іноземні коди. Дуже багато помилок.

### `bulletins`
Бюлетені вісника державних закупівель (якщо тендер із дампу Зовнішторгвидаву, він же вісник держзакупівель)


## Кого дякувати, якщо ви будете використовувати ці дані?
Приймемо із вдячністю  згадку про команду [Texty.org.ua](http://texty.org.ua), яка витрачає кращі години життя щоб із *"умовно-відкритих"* даних зробити *відкриті*. 

Ми в свою чергу вдячні команді Олександра Стародубцева та Максима Буренка за те, що вони змогли дістати із серверів "Зовнішторгвидаву" архівні дані за 6 років, без яких цей проект був би малоімовірним.
